apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJREx6Q0NBaGNDQVFBd2FURTVNRGNHQTFVRUF3d3dZV05qZFd0dWIzZ3RiWFZzZEdrdFkyeDFjM1JsY2kxbwpaV3h3WlhJdGQyVmlhRzl2YXk1aFoyVnVkSE11YzNaak1Rc3dDUVlEVlFRR0V3SkpUakVQTUEwR0ExVUVDQXdHClMyVnlZV3hoTVE0d0RBWURWUVFIREFWTGIyTm9hVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBUGIwbXVSMFdMTFNUQktZTHFtTlZtR3ZqQ3lVSHZhNFBxakYrUXlMZWRQTkgrMTFCeXpPbWV2bgpPYlhINzR2SVZxRURFV2tNVkJxODhxeXdONHFDZlZmdTVyTTl4aHd4cWZYVjRMZC8xVDdIWFZ0RkVUOURCYVVRCkJMeUxtVk9wUTJWMm5lVC9kL3drRnZkL29uZCtRUUdzNk9lSUdFRnNoU1NNYU45SVhnMXduSmo1cysvWVZKSTcKMDJsRm1lS0xrZ0JYUVo5Z3lZMkh2cGlaUzBvRGJ1RVZYWWVDUW5aM2EzUGFpMWtVQlB4YmZBS0E5Q1VqMEo2bQpWcDhPeW9YMGtkakdkZmFnVTV3Slp3ZXkxTzlCc0ZxWlZTV0FIeDUrczJncEIxMDZudmg4WSsvV1I3dFBqeUJOCjdIQ08xcmFSNkFQajFOZHJsVGpCV3pWMk80MGVpTjBDQXdFQUFhQ0JnREIrQmdrcWhraUc5dzBCQ1E0eGNUQnYKTUE0R0ExVWREd0VCL3dRRUF3SUZvREFnQmdOVkhTVUJBZjhFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSApBd0l3T3dZRFZSMFJCRFF3TW9Jd1lXTmpkV3R1YjNndGJYVnNkR2t0WTJ4MWMzUmxjaTFvWld4d1pYSXRkMlZpCmFHOXZheTVoWjJWdWRITXVjM1pqTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFDUVlNYU9mRHF4YkxoMzNGZXQKMnNUeStqQjFZcC9TZlRzajRHTlF5bHlvY0xCMEVHSmpFNUNSeDVHZ2tXN3paUVNkMHo0cTVya1VqS1NYVDhpdgp4czdIWjVQSGcvUHpJZ0h3eHRueWVqMzgwck5DRlhwdUltVS95dWFSR0hKVythSnQ0dTNJbUs3ZFNPa0lhZGlhCjVqbVVmbVZVTmo5QkhUM1ZjdDBpZVV5Wi9PM2NuTnhac3BtemJZNWtaaUpNOTdycFhmckxOTjlSc001RTA5b1kKdVBpbURKbzhKUWVMb2Y0a3RUUkU5RktsUEhKM0dBQWJaSEpKNUljU1c1T3J3cVBVR2hER1FUR2FsVG9YcE5DVwprQ05BZUFib1R4aVUzeW9sck9ZMGppWlZ3YzlBTjNlRmtzL3R4M1lURTVwQURRS1hDczZBOHJWTVNUVnVVc29TCkV1UmwKLS0tLS1FTkQgQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0tCg==
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000
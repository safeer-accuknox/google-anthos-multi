apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVEekNDQXZlZ0F3SUJBZ0lVZTgzSTN0ZlZUdytCZlJOcEtMS01aZmtGWVVjd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1p6RTVNRGNHQTFVRUF3d3dZV05qZFd0dWIzZ3RiWFZzZEdrdFkyeDFjM1JsY2kxb1pXeHdaWEl0ZDJWaQphRzl2YXk1aFoyVnVkSE11YzNaak1Rc3dDUVlEVlFRR0V3SkpUakVPTUF3R0ExVUVDQXdGVTNSaGRHVXhEVEFMCkJnTlZCQWNNQkVOcGRIa3dIaGNOTWpRd09USTJNVE0wTVRFNVdoY05NalV3T1RJMk1UTTBNVEU1V2pCbk1Ua3cKTndZRFZRUUREREJoWTJOMWEyNXZlQzF0ZFd4MGFTMWpiSFZ6ZEdWeUxXaGxiSEJsY2kxM1pXSm9iMjlyTG1GbgpaVzUwY3k1emRtTXhDekFKQmdOVkJBWVRBa2xPTVE0d0RBWURWUVFJREFWVGRHRjBaVEVOTUFzR0ExVUVCd3dFClEybDBlVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFLMklTZFlzTVQvcHM5SUwKVzVDR3RzM3RCNFVMMUZYdWRkdGh6YzVqMGFpeGRuNnV6UTdmbVZQYVJqenJCTHd6RHdCcnVmcDR1ekJnN1hWdQpiZlJsWUtPczMxYUx1ckhjdC9CRFAvWGhUS3NPSFV2YlBIWmNsRG14TkFWaVZ2SXF5dEpXVnQ2N0ZrRzVpZmZoCjU0aHBXdW5PakpqWFB5ZGlobzdCN043QmtwY3JCdUFOdWc4dnVtQXk0eWc3MUh6VjRSZ25Nd0Z6cXRUeC8wWGwKcVZUUWxJZzNBRlRONWNuZmxKVUhJQU1QeHE0RzAzTFpBT3VVRE1CeXU1eHprR0F0WDZ6WnByeXEzWE5neWxRUApqYytITTJ5NDBuK1JWbm5lR0F1bUgzZUIycVBJOU1JWmJZdmtiUDJyanRIeTM3K2VWd0V6M09nYnEyU2RjaDVVCnUzTjI0VVVDQXdFQUFhT0JzakNCcnpBZEJnTlZIUTRFRmdRVUxTQUpuT0VCTjRicXhMVDNKRVlmSTNpZmMwZ3cKSHdZRFZSMGpCQmd3Rm9BVUxTQUpuT0VCTjRicXhMVDNKRVlmSTNpZmMwZ3dEZ1lEVlIwUEFRSC9CQVFEQWdXZwpNQ0FHQTFVZEpRRUIvd1FXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQTdCZ05WSFJFRU5EQXlnakJoClkyTjFhMjV2ZUMxdGRXeDBhUzFqYkhWemRHVnlMV2hsYkhCbGNpMTNaV0pvYjI5ckxtRm5aVzUwY3k1emRtTXcKRFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUZRd2VCV3RkSVpKOTlIaUhXMFE3SGZoZjhLZllFT090VGtqSjhFUAp2SStDOUxiSjhCdzdPUktVRnZLaDhQeEkvM0lsOVM2OUllekhjV2ljVkl4aTlkRkRPZ3JPOTNHY01VRTIyYzZjCkpWeDY2ZktCYXowdE1WRzZRcGZlYmNpTnpJaWVhRnNkVThxZzlyUkJ6cU1MTm9DMG9LOFBnbktHUFU0cGM0TEkKVko1eERPNmFxVFdVUDRGdXhFcCs2bW9OdC9ZTU5vY0lzOHZ6QnRBYXB5R29mOUNuekVXeDcwN3p6eGgxUmhoLwpmc2JNcmI1dUZZVk9ZZWNXa0NoTkg1YUNETkxXR2ljeENhc2ZKZ0NMODNVQmhYbEsyejl2ZkhXN0htU25UWnZYCm9HUGlLL2dPcDZ4enVHdnhTcVByM29naE5UM0ROcnc2dVJoSDh3aCtFbm5POWpRPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000
apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUR4ekNDQXErZ0F3SUJBZ0lVY25RdExGd2dTQkhtNnZwdUJXc24rMW0xeVNnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2N6RUxNQWtHQTFVRUJoTUNWVk14RGpBTUJnTlZCQWdNQlZOMFlYUmxNUTB3Q3dZRFZRUUhEQVJEYVhSNQpNUlV3RXdZRFZRUUtEQXhQY21kaGJtbDZZWFJwYjI0eExqQXNCZ05WQkFNTUpXRmpZM1ZyYm05NExXMTFiSFJwCkxXTnNkWE4wWlhJdGFHVnNjR1Z5TFhkbFltaHZiMnN3SGhjTk1qUXdPVEkyTVRBMU9ERTVXaGNOTWpVd09USTIKTVRBMU9ERTVXakJ6TVFzd0NRWURWUVFHRXdKVlV6RU9NQXdHQTFVRUNBd0ZVM1JoZEdVeERUQUxCZ05WQkFjTQpCRU5wZEhreEZUQVRCZ05WQkFvTURFOXlaMkZ1YVhwaGRHbHZiakV1TUN3R0ExVUVBd3dsWVdOamRXdHViM2d0CmJYVnNkR2t0WTJ4MWMzUmxjaTFvWld4d1pYSXRkMlZpYUc5dmF6Q0NBU0l3RFFZSktvWklodmNOQVFFQkJRQUQKZ2dFUEFEQ0NBUW9DZ2dFQkFPUDBjQzROdjRkSUIzTVdBVk9NVlF1SUd5eTdFaWNzbm1OMllVVnU1WkxlZHlHMAo5cC9lVURUYXdPbkI0VTRTbmhidVVhengzalNEODhxZEFYS3ZpYVRoZkQvd0kzUnpDUEYySlpITDB0MDJGQW0yCkcvTlplajUrbEdRbStUWDk4UjZqVTRROERSMkR2ci9SU1VzdGFWS0ltNi9PL1U0NG1MYkRJT0t6bDBNbkNTK2UKcmFmUlIwMG1CS3JPSUVTQ3RFVkJ3cStYVzZIM1NSVytuVWk5QkdUeFBHeDZKRWQzZnZkK2VvUWt1cUhveVlPNwplMXdtL2xwL2Zxa3FSUmpnT1RXbHQvbWlDVWgzcDlSaFUrVDRoYUVJQ0hONGNLWFhrSWdEU29rSVRYT28wZ0VtCm5rWGROL0c1SHVnVFl3QXVvTkloeVkwSmRySTM0aGlUQXFSMWduTUNBd0VBQWFOVE1GRXdIUVlEVlIwT0JCWUUKRkhaR21aeUU1NUpSLzI0Q2o1TDdRMmc4NC82eE1COEdBMVVkSXdRWU1CYUFGSFpHbVp5RTU1SlIvMjRDajVMNwpRMmc4NC82eE1BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFEOHowNkx0CkVWKzlRNE9Qdm41dG9WMmZEMExDL2x4U2xHVjlEUlppSktwVTY3LzhsRHpDWGgwSmtmK0g2MytJb202ZWJwYjMKRnlxOVBhMkd6RnhqUFVTZmdrZk50TGwvZGoyNnErbHlNdDcxZTkrRjgzV3UyRWFzcVQ2TlNTc2lUQnUrM3pJcApOQTcyb3lNQUlqaTFDbDB0R3pyc2FpZ2NUR1Z0M2VUMWlsaE1OdnI4Mi9naTl3QWQrazh3UnlhVlZLWkhQVUVZCldoelJrTkRGUTJmdnRTY3NFVUIxN0hhNHlNTmNsQ0tmZjU3K05Gc2VMdXFJQ0pBZjhFYlZHRjlRUGFZaUFPTjQKWlJhSEEvQVMvK1ZkOFh1a2l0cWdJN0Y3N0Q3WlpHaCsySTZtOXlIM0wwQmxrdTVGL0pkSktTZUx1UXRmbUJmdQp5WldkU1BrK2VMYmRhSnc9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000
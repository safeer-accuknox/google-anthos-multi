apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUQxekNDQXIrZ0F3SUJBZ0lVZWRHZVltL0hycmdsZUJFNTNLR1BObnZ3SzZFd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1V6RUxNQWtHQTFVRUJoTUNRMDR4Q3pBSkJnTlZCQWdNQWtkRU1Rc3dDUVlEVlFRSERBSlRXakVUTUJFRwpBMVVFQ2d3S1FXTnRaU3dnU1c1akxqRVZNQk1HQTFVRUF3d01RV050WlNCU2IyOTBJRU5CTUI0WERUSTBNRGt5Ck5qRXlNRE13TWxvWERUSTFNRGt5TmpFeU1ETXdNbG93ZHpFTE1Ba0dBMVVFQmhNQ1EwNHhDekFKQmdOVkJBZ00KQWtkRU1Rc3dDUVlEVlFRSERBSlRXakVUTUJFR0ExVUVDZ3dLUVdOdFpTd2dTVzVqTGpFNU1EY0dBMVVFQXd3dwpZV05qZFd0dWIzZ3RiWFZzZEdrdFkyeDFjM1JsY2kxb1pXeHdaWEl0ZDJWaWFHOXZheTVoWjJWdWRITXVjM1pqCk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBcUF3TGsxNWN3YkpheTlMM2NkMTcKbEpxUUsxbGlDK3ZlN051eGtML2VtamxXRUdZK2laeGlBWU1BcWZpanF4NFhUbmVRVnpQbWl2MVdGYmhmZUo3UAo4ck5CUXV4dXFnZjJ5dXR4RGIrUkdvUWprajYwS2FNZDBmZjFPc3lFT3BPSkNNUmdyQ0hYamNwSEpGS1VCeG8xCmNpWEl4V3RtcGNpVEgrNWFVelB3aEI5ZWs3VC85Q3hqY2xIY0VNa2pCZVhrWXdHSHRWQ3B6NW16aStVdDFsdmkKUVNLMEh0WlVmeEo0cTlPWVAzcTFuc05PM1BnRjBCdjE2VTQyUnI2MHFEenJmbi9icENnUkE4SFZQU0pabzFVRgpyWEtTTmxjNXN4VVl1Q0RIV05GQ2lWRUtnZ0kvRTJCUVZiR0ljZnBsTmRSVHZUQm9QUEJ2Yksza1I5d1B6azdnCk9RSURBUUFCbzM4d2ZUQTdCZ05WSFJFRU5EQXlnakJoWTJOMWEyNXZlQzF0ZFd4MGFTMWpiSFZ6ZEdWeUxXaGwKYkhCbGNpMTNaV0pvYjI5ckxtRm5aVzUwY3k1emRtTXdIUVlEVlIwT0JCWUVGT3prMUw2OGdrNG5YWTMwNHBFaQpDNitTa2VVL01COEdBMVVkSXdRWU1CYUFGSGRLSGJEdE9aRk9JaHh6OXdrTWxnZFN2Z0xhTUEwR0NTcUdTSWIzCkRRRUJDd1VBQTRJQkFRQVJZNjR5QTM1NjdydlpMZTV3eTZzSUltRzQ3ZW82K2tYTG82d2RLdmV5Y3kzV3dBMkgKWEFkQTNTTE9lSnVjKytGS0tSZ2w3bGxwUXNVVzNEc1VTb1ZzeFlxQkxDUFIzbDI0aGwyYTg5Vyt4dmNRdkZaTgp2RzFVQm1ZMDJyTFpJekVqcG43dW5lRmgzaEJwcEx0SnV0UkNpdVNCeUt6RjBQM0tKSE1kRlRqNURHYVNPTjNoCjdwYWRPODYxUWlXeExHZFdDOTV2SkhQK2VNeFNJWWVtcDQ0WlNTa21JVzhBMTN2SWFSUCtUdVBtNFFZbjM0SUoKWjhaUFArRTJvWUdmL2pLdkNUSXJjN2pUcC81SS8zNU1odGVTZ1BWMmx5dHJJd0lwRkx0dDkwczQ4ZzkrbVFJMwpwaS82Mkx5RUhmUE1Vb1FuQkROeVBVekZDNUQ1TmVSZ0Y3L2wKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000
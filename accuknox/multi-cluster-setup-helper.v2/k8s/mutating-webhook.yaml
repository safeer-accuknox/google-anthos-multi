apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: VWlyd0lYcW11MFlxaXc5R3FOZmoKblZSOWthWG5mOEc4NHh1ZG9XenpNZHFmZ3BuMklHbWhyaUVKODN2Q3ZhbERmLy95bktLSndudnhzSzBGcjNJeApxbkVGN0xFVER2di9YVnJpLzBJNEdybTY4c1BVZjRnTHh3SURBUUFCb0lJQkdUQ0NBUlVHQ1NxR1NJYjNEUUVKCkRqR0NBUVl3Z2dFQ01Ba0dBMVVkRXdRQ01BQXdDd1lEVlIwUEJBUURBZ1hnTUJNR0ExVWRKUVFNTUFvR0NDc0cKQVFVRkJ3TUJNSUhTQmdOVkhSRUVnY293Z2NlQ0pXRmpZM1ZyYm05NExXMTFiSFJwTFdOc2RYTjBaWEl0YUdWcwpjR1Z5TFhkbFltaHZiMnVDTEdGalkzVnJibTk0TFcxMWJIUnBMV05zZFhOMFpYSXRhR1ZzY0dWeUxYZGxZbWh2CmIyc3VZV2RsYm5SemdqQmhZMk4xYTI1dmVDMXRkV3gwYVMxamJIVnpkR1Z5TFdobGJIQmxjaTEzWldKb2IyOXIKTG1GblpXNTBjeTV6ZG1PQ1BtRmpZM1ZyYm05NExXMTFiSFJwTFdOc2RYTjBaWEl0YUdWc2NHVnlMWGRsWW1odgpiMnN1WVdkbGJuUnpMbk4yWXk1amJIVnpkR1Z5TG14dlkyRnNNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUNzCmZQSUlHMlh3QUtFM2pmWEFML1BPZ1lReDdLUGU1NXIvWm5wUWRmK0NWbzRCL1dDTkZsMFVEUklpbjQ0aXFoS00KSGxRZ0wrSTJxNUg0NTJNd3AwaHVLYVNHWEpoOW9zMWt5SUFYVlM0NmNRTHdjN2pwRHBnUFMwRjR1Y0dpYTJJMwpVMERhTzNRdEd2KzdyUDcvcjBJLzNyUVpyZGlIcHNtSWVVZ1J1RitoeXpNWGZyUDJQRmYxU2Z3L1ltS0ExeFZSCmJlVFhyMFY0N3lOL3BhTWdUMXJMaVprMWlJOC9JQzNoeUNDYzFSUEF5eWVZRnh4UVl0MkVxV0lINDQzb0R1ZWgKeFpXTlc3TWNNaUwxSXBBOEtIdXAwNkNtTDNVemtuWmpJc25lMnBHWUNsMCs3ZkRWTlRGd2tsQit1Vnk2d1NpagpjRlV3Ulg1ZGhOT2U5TkRua0VnUwotLS0tLUVORCBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0K
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000
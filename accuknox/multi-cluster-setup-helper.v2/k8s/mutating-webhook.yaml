apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJREx6Q0NBaGNDQVFBd2FURTVNRGNHQTFVRUF3d3dZV05qZFd0dWIzZ3RiWFZzZEdrdFkyeDFjM1JsY2kxbwpaV3h3WlhJdGQyVmlhRzl2YXk1aFoyVnVkSE11YzNaak1Rc3dDUVlEVlFRR0V3SkpUakVQTUEwR0ExVUVDQXdHClMyVnlZV3hoTVE0d0RBWURWUVFIREFWTGIyTm9hVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0MKQVFvQ2dnRUJBSXNZUlZtL1F1Mi80cGNWUGNJb2l6T1IzSlFkV0dXQkxYdnNicXA2ZTFlck5WNEtQTUR1L2pyZwpna2twQXFvd0VqS2twRzVqSGJveFpKSmozUlp3YjVxQTRCWWtlS2N5QW9rTjBLV2pIdU1GckhkRE5kclo4dXhtCnlyQXZjaGRQcVRkVW1RVUF1REdQV3RmMnFXWllqUGlEZEpla0FPaXdhb2NtMVJkMDV3SHVJdVBKS05RZDJINFoKdmxkR05scFA2TStzeVMyTFNoeHl4QkJjRGpPeFRRWTZrOCtVdEdtUVBxOTYyWnMzY0YyMlZ4VVNJN1ZaSUZEVwp0eCtDek5IRUVycDVLZTNMMndJOHdKblIwS0s4OGQ2Qm1sZk5FWXM4RnJoNnNaOGRtd1RiVjJ0UUg0OXVCLzljCjUrSklKS2tJMFVNWU53UUdTbFZScDFRNnhWU0syd2tDQXdFQUFhQ0JnREIrQmdrcWhraUc5dzBCQ1E0eGNUQnYKTUE0R0ExVWREd0VCL3dRRUF3SUZvREFnQmdOVkhTVUJBZjhFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSApBd0l3T3dZRFZSMFJCRFF3TW9Jd1lXTmpkV3R1YjNndGJYVnNkR2t0WTJ4MWMzUmxjaTFvWld4d1pYSXRkMlZpCmFHOXZheTVoWjJWdWRITXVjM1pqTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFBbmRqbDNER3ZhcWJPL3JGYVIKNUpVMjlndVc2UjV3eUp0bE1YeXc2T3pKVW5DVEtkMUdnNDNBcXFPQ003TDNNQW02TldoUy91Z2Y1Zk9XR2YzYQpZeG1ENU5wRXE5czJFZVZPOWdXQitlMGdHQ3Z0ZDFzZG5LNFYxeXpMQzRLaUxrWFlZMjdSL3RpczBiTy9KcUdDCndxYS8wZGg1a1hpV3ZJVXpaeDhDVlo3TnpLUk02ang5QVZUNmwzOGR6ZkdFNmk0TldOQUFnTDVGbEQxYWJOdnIKN0JuZnp1Z3BheDg1NWg0cmI5bTU3cXovUnBHR054YzkxTSt2ZUptanpRTHFUTHJxSTE1S25HMGpaUlNvYS9leQpkUjkvVlgydmZtN1ZjUkdxWFYxeTFIb1psVzhSMjhGZEhOMG9XeHlXU29pTlRhSk1nSStRWStHSFRSTVovZ3FjCnpVVDIKLS0tLS1FTkQgQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0t
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000
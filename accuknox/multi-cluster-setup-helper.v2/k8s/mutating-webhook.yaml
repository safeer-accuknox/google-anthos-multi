apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: accuknox-multi-cluster-helper-webhook
webhooks:
- name: accuknox-multi-cluster-helper-webhook.agents.svc
  matchPolicy: Equivalent
  admissionReviewVersions: ["v1"]
  sideEffects: None
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: [""]
    apiVersions: ["v1"]
    resources: ["configmaps"]
    scope: "Namespaced"
  failurePolicy: Fail
  timeoutSeconds: 20
  clientConfig:
    # intended for demonstration purposes only and should be regarded as insecure.
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVEekNDQXZjQ0ZCNzA1d1JZakZwZU1LZEs2VS9RQmlnenZvNTZNQTBHQ1NxR1NJYjNEUUVCQ3dVQU1JSEQKTVFzd0NRWURWUVFHRXdKQlZURU9NQXdHQTFVRUNBd0ZVM1JoZEdVeERUQUxCZ05WQkFjTUJFTnBkSGt4RlRBVApCZ05WQkFvTURFOXlaMkZ1YVhwaGRHbHZiakVjTUJvR0ExVUVDd3dUVDNKbllXNXBlbUYwYVc5dVlXd2dWVzVwCmRERTVNRGNHQTFVRUF3d3dZV05qZFd0dWIzZ3RiWFZzZEdrdFkyeDFjM1JsY2kxb1pXeHdaWEl0ZDJWaWFHOXYKYXk1aFoyVnVkSE11YzNaak1TVXdJd1lKS29aSWh2Y05BUWtCRmhaNWIzVnlYMlZ0WVdsc1FHVjRZVzF3YkdVdQpZMjl0TUI0WERUSTBNRGt5TmpFeE5UQXhNbG9YRFRJM01EY3hOekV4TlRBeE1sb3dnY014Q3pBSkJnTlZCQVlUCkFrRlZNUTR3REFZRFZRUUlEQVZUZEdGMFpURU5NQXNHQTFVRUJ3d0VRMmwwZVRFVk1CTUdBMVVFQ2d3TVQzSm4KWVc1cGVtRjBhVzl1TVJ3d0dnWURWUVFMREJOUGNtZGhibWw2WVhScGIyNWhiQ0JWYm1sME1Ua3dOd1lEVlFRRApEREJoWTJOMWEyNXZlQzF0ZFd4MGFTMWpiSFZ6ZEdWeUxXaGxiSEJsY2kxM1pXSm9iMjlyTG1GblpXNTBjeTV6CmRtTXhKVEFqQmdrcWhraUc5dzBCQ1FFV0ZubHZkWEpmWlcxaGFXeEFaWGhoYlhCc1pTNWpiMjB3Z2dFaU1BMEcKQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURMMExGSlZIeEFRcTJ1QWU5SGhYMEwwcnlMM3JsRgpsYVhMTGtMWkdrY0NuZ3FzUk5idy9pcTVjdnBad2dQSFNYUWtGMnVrVTNXUEZ6VkhQWHRPVUhOTytRUTdHM0ZPCmErS3FpMzF0VTB3aDdMNWtaendNc3dpSE90NlZIbHp0OXJMVXpob2tUeVNJS28yMXA0eHpLbnBTc3c4akp6dEkKcXJPZEFXMEdHRStxM1RrRjBLOVV1azd1b2JEdEJjdUxvM1BhQlZ3MXdQVzhrTG4wSWxIV1RZY09DK1pWSkJSUQptdEpid242b3BBQ3dYSmVHU1JzUWYxZnhaSlc2T215ekYrckpqeUx4VHhQMzYzUG9aN09VMDlTWjU4YlZLbzNjCkhlaE1MeDE5Q0hKY25odUpMWGJoaGZjcFRkNnNhZnVRamJES2xFTnN6TmsvcE9RS0prYUYrZTJOQWdNQkFBRXcKRFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUN6bnZsMEtUaklwVTZESVpVdERlSFBreCtsZktMSFVRdTlZeWExdwpwMER3MXp4ZWJwSHRvb3dhd2pXWmduL3UrTVV5em5DUXMveWRJdUkyenlJWkxjRnNtZ0tkZUxFcnpLZjJnMTk5CnBLSVpQT1lZQ1VJa3dsNEVYb2M5VDFYK2F1RlF5RW12Zk5DWFA4Sk9rYllsMjFDS2RLd3JQNTBYMFdLNjk1ODUKQjhYVHdFTXBZNXIyamZWNUsxVVJVSCtlNEt6NGJrU1VjZmFUWHB1WmdLa2pqcVI4WUhUREVYeW9WSVFiT2JsVQpyVEpJZGR5engrS3ovTzlCb2lOakJIdG4yb1U5cFpGdFF2VCtWcXdFVnBYS0w4QnoweFh3RTdlbVFkVWt2TThpCkltSUJ0RTdGdGZrSXRhK1RuVXRCWWZUeE9kOHJkaVNSUFFPQXpYK04yMEo0UXc0PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    service:
      namespace: agents
      name: accuknox-multi-cluster-helper-webhook
      path: /mutate
      port: 5000